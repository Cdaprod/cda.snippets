<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Snippet App</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <style>
        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(to right, #000428, #004e92);
        }

        .snippet {
            background-color: rgba(255, 255, 255, 0.1);
            border-radius: 5px;
            padding: 10px;
            margin-bottom: 10px;
            position: relative;
        }
    </style>
</head>

<body class="text-white p-6">

    <!-- Search Input -->
    <input type="text" id="searchInput" placeholder="Search..." class="mb-4 p-2 rounded bg-white text-black w-full">
    <button id="importButton" class="p-2 rounded bg-lime-500 mr-2">Import</button>
    <input type="file" id="importFile" accept=".json" style="display:none">
    <button id="exportButton" class="p-2 rounded bg-lime-500">Export</button>

    <!-- Tags Navbar -->
    <div id="tagsNav" class="mb-4 overflow-x-auto whitespace-nowrap"></div>

    <!-- Snippets Container -->
    <div id="snippets"></div>

    <!-- App's JavaScript -->
    <script>
        const snippetsDiv = document.getElementById('snippets');
        const tagsNav = document.getElementById('tagsNav');
        let tags = [];
        let snippets = [];

        // Sample data to mimic the user adding snippets
        const sampleData = {
            "21670FF7-3A1A-411F-8A8E-D08DE4FA5DFE": {
                body: "npm create sanity@latest -- --template get-started --project mxj26izc --dataset production --provider google",
                description: "#sanity"
            }
            // Add more sample data as needed
        };
        snippets = { ...snippets, ...sampleData };

            }
            // Add more sample data as needed
        };
        snippets = [...Object.values(sampleData)];
        
        // Get elements
        const importButton = document.getElementById('importButton');
        const importFile = document.getElementById('importFile');
        const exportButton = document.getElementById('exportButton');

        // Handle importing of data
        importButton.addEventListener('click', () => importFile.click());
        importFile.addEventListener('change', (event) => {
            const file = event.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = (e) => {
                    try {
                        const importedData = JSON.parse(e.target.result);
                        snippets = { ...snippets, ...importedData };
                        renderSnippets();
                        alert('Data Imported Successfully!');
                    } catch (error) {
                        alert('Invalid JSON file.');
                    }
                };

                reader.readAsText(file);
            }
        });

        // Handle exporting of data
        exportButton.addEventListener('click', () => {
            const dataStr = JSON.stringify(snippets, null, 2);
            const blob = new Blob([dataStr], { type: 'text/json' });
            const url = URL.createObjectURL(blob);
            const link = document.createElement('a');
            link.setAttribute('download', 'snippets.json');
            link.href = url;
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        });


        function renderSnippets() {
            snippetsDiv.innerHTML = '';
            for (let uuid in snippets) {
                const snippet = snippets[uuid];
                const snippetDiv = document.createElement('div');
                snippetDiv.className = 'snippet';
                snippetDiv.innerHTML = `
                    <h2 class="text-lime-400">${snippet.description}</h2>
                    <p>${snippet.body}</p>
                    <button onclick="copyToClipboard('${snippet.body}')" class="absolute top-2 right-2 bg-lime-500 p-1 rounded">Copy</button>
                    <hr class="mt-4 border-lime-500">
                `;
                snippetsDiv.appendChild(snippetDiv);
                const tag = snippet.description.replace('#', '');
                if (!tags.includes(tag)) {
                    tags.push(tag);
                    const tagButton = document.createElement('button');
                    tagButton.className = 'p-2 mr-2 mb-2 rounded bg-lime-500';
                    tagButton.textContent = `#${tag}`;
                    tagButton.onclick = () => filterByTag(tag);
                    tagsNav.appendChild(tagButton);
                }
            }
        }


        function copyToClipboard(text) {
            const textArea = document.createElement('textarea');
            textArea.value = text;
            document.body.appendChild(textArea);
            textArea.select();
            document.execCommand('Copy');
            textArea.remove();
            alert('Snippet copied to clipboard!');
        }

        function filterByTag(tag) {
            // Implement filtering logic if required
        }

        renderSnippets();
    </script>

</body>

</html>
